<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="GHelper.Linux.UI.Views.ExtraWindow"
        Title="Extra Settings"
        Width="520"
        Height="700"
        MinWidth="420"
        MinHeight="500"
        WindowStartupLocation="CenterScreen"
        Background="#1C1C1C"
        Icon="avares://ghelper/UI/Assets/standard.ico">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="10" Spacing="5">

            <!-- ═══════════════════ KEYBOARD BACKLIGHT ═══════════════════ -->
            <Border Classes="panel">
                <StackPanel>
                    <Border Classes="panel-header" Margin="0,0,0,8">
                        <TextBlock Classes="header" Text="Keyboard Backlight" />
                    </Border>

                    <!-- Brightness slider (0-3) -->
                    <Grid ColumnDefinitions="120,*,40" Margin="0,4">
                        <TextBlock Grid.Column="0" Text="Brightness"
                                   Classes="label-dim" VerticalAlignment="Center" />
                        <Slider Grid.Column="1" x:Name="sliderKbdBrightness"
                                Minimum="0" Maximum="3" Value="3"
                                TickFrequency="1" IsSnapToTickEnabled="True"
                                ValueChanged="SliderKbdBrightness_ValueChanged" />
                        <TextBlock Grid.Column="2" x:Name="labelKbdBrightness"
                                   Classes="value" Text="3"
                                   HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Grid>

                    <!-- Animation Speed -->
                    <Grid ColumnDefinitions="120,*" Margin="0,4">
                        <TextBlock Grid.Column="0" Text="Animation Speed"
                                   Classes="label-dim" VerticalAlignment="Center" />
                        <ComboBox Grid.Column="1" x:Name="comboKbdSpeed"
                                  Width="120" Height="28"
                                  SelectionChanged="ComboKbdSpeed_Changed" />
                    </Grid>

                    <!-- Power Zone Checkboxes -->
                    <TextBlock Text="Power Zones" Classes="label-dim" Margin="0,8,0,4" FontWeight="SemiBold" />

                    <!-- Header row -->
                    <Grid ColumnDefinitions="80,60,60,60,60,60" Margin="0,2">
                        <TextBlock Grid.Column="0" Text="" />
                        <TextBlock Grid.Column="1" Text="Awake" Classes="label-dim" FontSize="10" HorizontalAlignment="Center" />
                        <TextBlock Grid.Column="2" Text="Boot" Classes="label-dim" FontSize="10" HorizontalAlignment="Center" />
                        <TextBlock Grid.Column="3" Text="Sleep" Classes="label-dim" FontSize="10" HorizontalAlignment="Center" />
                        <TextBlock Grid.Column="4" Text="Shutdown" Classes="label-dim" FontSize="10" HorizontalAlignment="Center" />
                        <TextBlock Grid.Column="5" Text="Battery" Classes="label-dim" FontSize="10" HorizontalAlignment="Center" />
                    </Grid>

                    <!-- Keyboard row -->
                    <Grid ColumnDefinitions="80,60,60,60,60,60" Margin="0,1" x:Name="rowPowerKeyboard">
                        <TextBlock Grid.Column="0" Text="Keyboard" Classes="label-dim" FontSize="11" VerticalAlignment="Center" />
                        <CheckBox Grid.Column="1" x:Name="checkAwake" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="2" x:Name="checkBoot" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="3" x:Name="checkSleep" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="4" x:Name="checkShutdown" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="5" x:Name="checkBattery" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                    </Grid>

                    <!-- Logo row -->
                    <Grid ColumnDefinitions="80,60,60,60,60,60" Margin="0,1" x:Name="rowPowerLogo">
                        <TextBlock Grid.Column="0" Text="Logo" Classes="label-dim" FontSize="11" VerticalAlignment="Center" />
                        <CheckBox Grid.Column="1" x:Name="checkAwakeLogo" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="2" x:Name="checkBootLogo" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="3" x:Name="checkSleepLogo" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="4" x:Name="checkShutdownLogo" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="5" x:Name="checkBatteryLogo" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                    </Grid>

                    <!-- Lightbar row -->
                    <Grid ColumnDefinitions="80,60,60,60,60,60" Margin="0,1" x:Name="rowPowerBar">
                        <TextBlock Grid.Column="0" Text="Lightbar" Classes="label-dim" FontSize="11" VerticalAlignment="Center" />
                        <CheckBox Grid.Column="1" x:Name="checkAwakeBar" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="2" x:Name="checkBootBar" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="3" x:Name="checkSleepBar" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="4" x:Name="checkShutdownBar" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="5" x:Name="checkBatteryBar" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                    </Grid>

                    <!-- Lid row -->
                    <Grid ColumnDefinitions="80,60,60,60,60,60" Margin="0,1" x:Name="rowPowerLid">
                        <TextBlock Grid.Column="0" Text="Lid" Classes="label-dim" FontSize="11" VerticalAlignment="Center" />
                        <CheckBox Grid.Column="1" x:Name="checkAwakeLid" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="2" x:Name="checkBootLid" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="3" x:Name="checkSleepLid" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="4" x:Name="checkShutdownLid" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                        <CheckBox Grid.Column="5" x:Name="checkBatteryLid" HorizontalAlignment="Center" Checked="CheckPower_Changed" Unchecked="CheckPower_Changed" />
                    </Grid>
                </StackPanel>
            </Border>

            <!-- ═══════════════════ DISPLAY SETTINGS ═══════════════════ -->
            <Border Classes="panel">
                <StackPanel>
                    <Border Classes="panel-header" Margin="0,0,0,8">
                        <TextBlock Classes="header" Text="Display" />
                    </Border>

                    <!-- Brightness -->
                    <Grid ColumnDefinitions="120,*,50" Margin="0,4">
                        <TextBlock Grid.Column="0" Text="Brightness"
                                   Classes="label-dim" VerticalAlignment="Center" />
                        <Slider Grid.Column="1" x:Name="sliderBrightness"
                                Minimum="0" Maximum="100" Value="100"
                                ValueChanged="SliderBrightness_ValueChanged" />
                        <TextBlock Grid.Column="2" x:Name="labelBrightness"
                                   Classes="value" Text="100%"
                                   HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Grid>

                    <!-- Panel Overdrive -->
                    <CheckBox x:Name="checkOverdrive" Content="Panel Overdrive"
                              Margin="0,4"
                              Checked="CheckOverdrive_Changed"
                              Unchecked="CheckOverdrive_Changed" />

                    <!-- Gamma -->
                    <Grid ColumnDefinitions="120,*,50" Margin="0,4">
                        <TextBlock Grid.Column="0" Text="Gamma"
                                   Classes="label-dim" VerticalAlignment="Center" />
                        <Slider Grid.Column="1" x:Name="sliderGamma"
                                Minimum="50" Maximum="200" Value="100"
                                TickFrequency="10"
                                ValueChanged="SliderGamma_ValueChanged" />
                        <TextBlock Grid.Column="2" x:Name="labelGamma"
                                   Classes="value" Text="1.00"
                                   HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Grid>
                </StackPanel>
            </Border>

            <!-- ═══════════════════ OTHER SETTINGS ═══════════════════ -->
            <Border Classes="panel">
                <StackPanel>
                    <Border Classes="panel-header" Margin="0,0,0,8">
                        <TextBlock Classes="header" Text="Other" />
                    </Border>

                    <CheckBox x:Name="checkBootSound" Content="Boot Sound"
                              Margin="0,4"
                              Checked="CheckBootSound_Changed"
                              Unchecked="CheckBootSound_Changed" />

                    <CheckBox x:Name="checkPerKeyRGB" Content="Per-Key RGB (instead of 4-zone)"
                              Margin="0,4" IsVisible="False"
                              Checked="CheckPerKeyRGB_Changed"
                              Unchecked="CheckPerKeyRGB_Changed" />

                    <CheckBox x:Name="checkTopmost" Content="Window Always on Top"
                              Margin="0,4"
                              Checked="CheckTopmost_Changed"
                              Unchecked="CheckTopmost_Changed" />

                    <CheckBox x:Name="checkBWIcon" Content="B&amp;W Tray Icon"
                              Margin="0,4"
                              Checked="CheckBWIcon_Changed"
                              Unchecked="CheckBWIcon_Changed" />

                    <CheckBox x:Name="checkClamshell" Content="Clamshell Mode (disable sleep on lid close)"
                              Margin="0,4"
                              Checked="CheckClamshell_Changed"
                              Unchecked="CheckClamshell_Changed" />

                    <Separator Margin="0,8,0,4" />

                    <!-- Device toggles -->
                    <CheckBox x:Name="checkCamera" Content="Camera"
                              Margin="0,4"
                              Checked="CheckCamera_Changed"
                              Unchecked="CheckCamera_Changed" />

                    <CheckBox x:Name="checkTouchpad" Content="Touchpad"
                              Margin="0,4"
                              Checked="CheckTouchpad_Changed"
                              Unchecked="CheckTouchpad_Changed" />

                    <CheckBox x:Name="checkTouchscreen" Content="Touchscreen"
                              Margin="0,4" IsVisible="False"
                              Checked="CheckTouchscreen_Changed"
                              Unchecked="CheckTouchscreen_Changed" />
                </StackPanel>
            </Border>

            <!-- ═══════════════════ POWER MANAGEMENT ═══════════════════ -->
            <Border Classes="panel">
                <StackPanel>
                    <Border Classes="panel-header" Margin="0,0,0,8">
                        <TextBlock Classes="header" Text="Power Management" />
                    </Border>

                    <!-- Platform Profile -->
                    <Grid ColumnDefinitions="120,*" Margin="0,4">
                        <TextBlock Grid.Column="0" Text="Platform Profile"
                                   Classes="label-dim" VerticalAlignment="Center" />
                        <ComboBox Grid.Column="1" x:Name="comboPlatformProfile"
                                  Width="200" SelectionChanged="ComboPlatformProfile_Changed">
                            <ComboBoxItem Content="low-power" />
                            <ComboBoxItem Content="balanced" />
                            <ComboBoxItem Content="performance" />
                        </ComboBox>
                    </Grid>

                    <!-- ASPM Policy -->
                    <Grid ColumnDefinitions="120,*" Margin="0,4">
                        <TextBlock Grid.Column="0" Text="PCIe ASPM"
                                   Classes="label-dim" VerticalAlignment="Center" />
                        <ComboBox Grid.Column="1" x:Name="comboAspm"
                                  Width="200" SelectionChanged="ComboAspm_Changed">
                            <ComboBoxItem Content="default" />
                            <ComboBoxItem Content="performance" />
                            <ComboBoxItem Content="powersave" />
                            <ComboBoxItem Content="powersupersave" />
                        </ComboBox>
                    </Grid>

                    <!-- Battery Health -->
                    <TextBlock x:Name="labelBatteryHealth" Classes="label-dim"
                               Text="Battery health: --%" Margin="0,8,0,0" />
                    <TextBlock x:Name="labelPowerDraw" Classes="label-dim"
                               Text="Power draw: -- mW" Margin="0,4,0,0" />
                </StackPanel>
            </Border>

            <!-- ═══════════════════ SYSTEM INFO ═══════════════════ -->
            <Border Classes="panel">
                <StackPanel>
                    <Border Classes="panel-header" Margin="0,0,0,8">
                        <TextBlock Classes="header" Text="System Info" />
                    </Border>

                    <TextBlock x:Name="labelModel" Classes="label-dim"
                               Text="Model: --" />
                    <TextBlock x:Name="labelBios" Classes="label-dim"
                               Text="BIOS: --" Margin="0,4,0,0" />
                    <TextBlock x:Name="labelKernel" Classes="label-dim"
                               Text="Kernel: --" Margin="0,4,0,0" />
                    <TextBlock x:Name="labelAsusWmi" Classes="label-dim"
                               Text="asus-wmi: --" Margin="0,4,0,0" />
                    <TextBlock x:Name="labelFeatures" Classes="label-dim"
                               Text="" Margin="0,4,0,0" TextWrapping="Wrap" />
                </StackPanel>
            </Border>

            <!-- ═══════════════════ ADVANCED ═══════════════════ -->
            <Border Classes="panel">
                <StackPanel>
                    <Border Classes="panel-header" Margin="0,0,0,8">
                        <TextBlock Classes="header" Text="Advanced" />
                    </Border>

                    <CheckBox x:Name="checkAutoApplyPower" Content="Auto-apply power limits on mode change"
                              Margin="0,4"
                              Checked="CheckAutoApplyPower_Changed"
                              Unchecked="CheckAutoApplyPower_Changed" />

                    <CheckBox x:Name="checkScreenAuto" Content="Auto-switch refresh rate (AC/Battery)"
                              Margin="0,4"
                              Checked="CheckScreenAuto_Changed"
                              Unchecked="CheckScreenAuto_Changed" />

                    <!-- CPU Cores -->
                    <Grid ColumnDefinitions="120,*,50" Margin="0,8,0,4" x:Name="panelCpuCores">
                        <TextBlock Grid.Column="0" Text="CPU Cores"
                                   Classes="label-dim" VerticalAlignment="Center" />
                        <Slider Grid.Column="1" x:Name="sliderCpuCores"
                                Minimum="1" Maximum="32" Value="32"
                                TickFrequency="1" IsSnapToTickEnabled="True"
                                ValueChanged="SliderCpuCores_ValueChanged" />
                        <TextBlock Grid.Column="2" x:Name="labelCpuCores" Classes="value"
                                   Text="32" HorizontalAlignment="Center"
                                   VerticalAlignment="Center" />
                    </Grid>
                    <TextBlock x:Name="labelCpuCoresInfo" Classes="label-dim"
                               Text="" FontSize="10" Margin="0,0,0,4" />

                    <Button x:Name="buttonOpenLog" Classes="ghelper"
                            Content="Open Log File" Margin="0,8,0,0"
                            Click="ButtonOpenLog_Click" />
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>

</Window>
